"use strict";(self.webpackChunk_readyplayerme_visage=self.webpackChunk_readyplayerme_visage||[]).push([[22],{"./src/components/Exhibit/Exhibit.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},_DragNDrop:function(){return _DragNDrop},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Exhibit_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),services=__webpack_require__("./src/services/index.ts"),FileDropper_component=__webpack_require__("./src/components/FileDropper/FileDropper.component.tsx"),three_module=__webpack_require__("./node_modules/three/build/three.module.js"),EnvironmentMap_service=__webpack_require__("./src/services/EnvironmentMap.service.ts"),PresentationControls=__webpack_require__("./node_modules/@react-three/drei/web/PresentationControls.js"),Bounds=__webpack_require__("./node_modules/@react-three/drei/core/Bounds.js"),ContactShadows=__webpack_require__("./node_modules/@react-three/drei/core/ContactShadows.js"),Environment_component=__webpack_require__("./src/components/Scene/Environment.component.tsx"),FloatingModel=__webpack_require__("./src/components/Models/FloatingModel/index.ts"),StaticModel=__webpack_require__("./src/components/Models/StaticModel/index.ts"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),BoundsModelContainer=function BoundsModelContainer(_ref){var modelSrc=_ref.modelSrc,children=_ref.children,fit=_ref.fit,onLoaded=_ref.onLoaded,bounds=(0,Bounds.B)(),_useState=(0,react.useState)((0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})),_useState2=(0,slicedToArray.Z)(_useState,2),fallback=_useState2[0],setFallback=_useState2[1],onChildLoaded=(0,react.useCallback)((function(){fit&&bounds.refresh().clip().fit(),(0,services.DK)(onLoaded)}),[bounds,fit]),childModel=(0,react.useMemo)((function(){return react.Children.map(children,(function(child){return(0,react.cloneElement)(child,{setModelFallback:setFallback,onLoaded:onChildLoaded})}))}),[modelSrc,children,onChildLoaded]);return(0,react.useEffect)((function(){fit&&bounds.refresh().clip().fit()}),[modelSrc,fit,fallback]),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:childModel})};try{BoundsModelContainer.displayName="BoundsModelContainer",BoundsModelContainer.__docgenInfo={description:"",displayName:"BoundsModelContainer",props:{modelSrc:{defaultValue:null,description:"",name:"modelSrc",required:!0,type:{name:"string | Blob"}},fit:{defaultValue:null,description:"",name:"fit",required:!1,type:{name:"boolean"}},onLoaded:{defaultValue:null,description:"Detect when model is loaded and trigger custom logic.",name:"onLoaded",required:!1,type:{name:"(() => void)"}},onLoading:{defaultValue:null,description:"Detect when model is being loaded and trigger custom logic.",name:"onLoading",required:!1,type:{name:"(() => void)"}},setModelFallback:{defaultValue:null,description:"",name:"setModelFallback",required:!1,type:{name:"((fallback: Element) => void)"}},bloom:{defaultValue:null,description:"",name:"bloom",required:!1,type:{name:"BloomConfiguration"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Models/BoundsModel/BoundsModel.container.tsx#BoundsModelContainer"]={docgenInfo:BoundsModelContainer.__docgenInfo,name:"BoundsModelContainer",path:"src/components/Models/BoundsModel/BoundsModel.container.tsx#BoundsModelContainer"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2,_Default$parameters2$,_DragNDrop$parameters,_DragNDrop$parameters2,_DragNDrop$parameters3,BaseCanvas=__webpack_require__("./src/components/BaseCanvas/index.ts"),Capture_component=__webpack_require__("./src/components/Capture/Capture.component.tsx"),Background=__webpack_require__("./src/components/Background/index.ts"),Exhibit=function Exhibit(_ref){var modelSrc=_ref.modelSrc,_ref$scale=_ref.scale,scale=void 0===_ref$scale?1:_ref$scale,_ref$environment=_ref.environment,environment=void 0===_ref$environment?"city":_ref$environment,position=_ref.position,style=_ref.style,className=_ref.className,_ref$shadows=_ref.shadows,shadows=void 0!==_ref$shadows&&_ref$shadows,_ref$float=_ref.float,float=void 0!==_ref$float&&_ref$float,_ref$fit=_ref.fit,fit=void 0!==_ref$fit&&_ref$fit,capture=_ref.capture,_ref$snap=_ref.snap,snap=void 0!==_ref$snap&&_ref$snap,_ref$lockVertical=_ref.lockVertical,lockVertical=void 0!==_ref$lockVertical&&_ref$lockVertical,onLoaded=_ref.onLoaded,onLoading=_ref.onLoading,model=(0,react.useMemo)((function(){return(0,services.XH)(modelSrc)?float?(0,jsx_runtime.jsx)(FloatingModel.q,{modelSrc:modelSrc,scale:scale}):(0,jsx_runtime.jsx)(StaticModel.P,{modelSrc:modelSrc,scale:scale}):null}),[float,modelSrc,scale]);return(0,react.useEffect)((function(){return(0,services.DK)(onLoading)}),[modelSrc,onLoading]),(0,jsx_runtime.jsxs)(BaseCanvas.u,{position:position,style:style,className:className,children:[(0,jsx_runtime.jsxs)(react.Suspense,{fallback:null,children:[(0,jsx_runtime.jsx)("ambientLight",{intensity:.5}),(0,jsx_runtime.jsx)("spotLight",{position:[10,10,10],angle:.15,penumbra:1,"shadow-mapSize":[512,512],castShadow:!0}),(0,jsx_runtime.jsx)(PresentationControls.N,{global:!0,config:{mass:2,tension:500},snap:snap,rotation:[0,-.3,0],polar:lockVertical?[0,0]:[-Math.PI/3,Math.PI/3],azimuth:[-1/0,1/0],children:model&&(0,jsx_runtime.jsx)(Bounds.Y,{fit:fit,clip:fit,observe:fit,children:(0,jsx_runtime.jsx)(BoundsModelContainer,{modelSrc:modelSrc,fit:fit,onLoaded:onLoaded,children:model})})}),shadows&&(0,jsx_runtime.jsx)(ContactShadows.j,{position:[0,-1,0],opacity:.75,scale:10,blur:2.6,far:2}),(0,jsx_runtime.jsx)(Environment_component.q,{environment:environment})]}),capture&&(0,jsx_runtime.jsx)(Capture_component.Z,(0,objectSpread2.Z)({},capture)),(null==style?void 0:style.background)&&(0,jsx_runtime.jsx)(Background.l,{color:style.background})]})};try{Exhibit.displayName="Exhibit",Exhibit.__docgenInfo={description:"Interactive presentation of any GLTF (.glb) asset.",displayName:"Exhibit",props:{modelSrc:{defaultValue:null,description:"Arbitrary binary data (base64 string | Blob) of a `.glb` file or path (URL) to a `.glb` resource.",name:"modelSrc",required:!0,type:{name:"string | Blob"}},scale:{defaultValue:{value:"1"},description:"Size of the rendered GLB model.",name:"scale",required:!1,type:{name:"number"}},style:{defaultValue:null,description:"Pass styling to canvas.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Custom style classes for canvas.",name:"className",required:!1,type:{name:"string"}},shadows:{defaultValue:{value:"false"},description:"Enables soft shadows.",name:"shadows",required:!1,type:{name:"boolean"}},float:{defaultValue:{value:"false"},description:"Enables floating idle animation.",name:"float",required:!1,type:{name:"boolean"}},fit:{defaultValue:{value:"false"},description:"Enables model to fit to available canvas dimensions.",name:"fit",required:!1,type:{name:"boolean"}},capture:{defaultValue:null,description:"Return base64 image after making screenshot of the canvas.",name:"capture",required:!1,type:{name:"CaptureType"}},snap:{defaultValue:{value:"false"},description:"Enables snap-back to center after rotating model.",name:"snap",required:!1,type:{name:"boolean"}},lockVertical:{defaultValue:{value:"false"},description:"Disables vertical rotation.",name:"lockVertical",required:!1,type:{name:"boolean"}},position:{defaultValue:null,description:"A Vector3 representing the cameras position, default is (0, 0, 5)",name:"position",required:!1,type:{name:"Vector3"}},environment:{defaultValue:{value:"city"},description:"Brightness, color hue, shadow contrast, reflection details change according to the selected environment.\nPossible to provide a custom `.hdr` file path (URL) as environment background.",name:"environment",required:!1,type:{name:"string"}},onLoaded:{defaultValue:null,description:"Detect when model is loaded and trigger custom logic.",name:"onLoaded",required:!1,type:{name:"(() => void)"}},onLoading:{defaultValue:null,description:"Detect when model is being loaded and trigger custom logic.",name:"onLoading",required:!1,type:{name:"(() => void)"}},bloom:{defaultValue:null,description:"",name:"bloom",required:!1,type:{name:"BloomConfiguration"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Exhibit/Exhibit.component.tsx#Exhibit"]={docgenInfo:Exhibit.__docgenInfo,name:"Exhibit",path:"src/components/Exhibit/Exhibit.component.tsx#Exhibit"})}catch(__react_docgen_typescript_loader_error){}var Default=function Template(args){return(0,jsx_runtime.jsx)(Exhibit,(0,objectSpread2.Z)({},args))}.bind({});Default.args={modelSrc:(0,services.gT)("headwear.glb"),scale:3,environment:"hub",position:new three_module.Vector3(0,1,5),fit:!0,float:!0,shadows:!0,style:{background:"#ccc"},snap:!0,lockVertical:!1,onLoaded:function onLoaded(){return console.info("EVENT: static avatar loaded")},onLoading:function onLoading(){return console.info("EVENT: loading static avatar")}},Default.argTypes={environment:{options:Object.keys(EnvironmentMap_service.s),control:{type:"select"}}};var _DragNDrop=function DropTemplate(args){return(0,jsx_runtime.jsx)(FileDropper_component.s,{placeholder:"Drag n' Drop a .glb model here",children:(0,jsx_runtime.jsx)(Exhibit,(0,objectSpread2.Z)({},args))})}.bind({});_DragNDrop.args=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.args),{},{onLoaded:function onLoaded(){return console.info("EVENT: static avatar loaded")},onLoading:function onLoading(){return console.info("EVENT: loading static avatar")},position:new three_module.Vector3(0,0,5)}),_DragNDrop.argTypes={modelSrc:{control:!1}};var Exhibit_stories={title:"Components/Exhibit",component:Exhibit,argTypes:{scale:{control:{type:"range",min:.01,max:10,step:.01}}}};Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => <Exhibit {...args} />"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})}),_DragNDrop.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},_DragNDrop.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_DragNDrop$parameters=_DragNDrop.parameters)||void 0===_DragNDrop$parameters?void 0:_DragNDrop$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:'args => <FileDropper placeholder="Drag n\' Drop a .glb model here">\n    <Exhibit {...args} />\n  </FileDropper>'},null===(_DragNDrop$parameters2=_DragNDrop.parameters)||void 0===_DragNDrop$parameters2||null===(_DragNDrop$parameters3=_DragNDrop$parameters2.docs)||void 0===_DragNDrop$parameters3?void 0:_DragNDrop$parameters3.source)})});var __namedExportsOrder=["Default","_DragNDrop"]}}]);