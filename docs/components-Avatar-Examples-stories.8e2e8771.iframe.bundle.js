"use strict";(self.webpackChunk_readyplayerme_visage=self.webpackChunk_readyplayerme_visage||[]).push([[960],{"./src/components/Avatar/Examples.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FloatingSparkles:function(){return FloatingSparkles},SpawnEffectAndAnimation:function(){return SpawnEffectAndAnimation},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return Examples_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),three_module=__webpack_require__("./node_modules/three/build/three.module.js"),index_673ef987_esm=__webpack_require__("./node_modules/@react-three/fiber/dist/index-673ef987.esm.js");const SparklesImplMaterial=function shaderMaterial(uniforms,vertexShader,fragmentShader,onInit){const material=class material extends three_module.ShaderMaterial{constructor(parameters={}){const entries=Object.entries(uniforms);super({uniforms:entries.reduce(((acc,[name,value])=>({...acc,...three_module.UniformsUtils.clone({[name]:{value:value}})})),{}),vertexShader:vertexShader,fragmentShader:fragmentShader}),this.key="",entries.forEach((([name])=>Object.defineProperty(this,name,{get:()=>this.uniforms[name].value,set:v=>this.uniforms[name].value=v}))),Object.assign(this,parameters),onInit&&onInit(this)}};return material.key=three_module.MathUtils.generateUUID(),material}({time:0,pixelRatio:1}," uniform float pixelRatio;\n    uniform float time;\n    attribute float size;  \n    attribute float speed;  \n    attribute float opacity;\n    attribute vec3 noise;\n    attribute vec3 color;\n    varying vec3 vColor;\n    varying float vOpacity;\n    void main() {\n      vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;\n      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;\n      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;\n      vec4 viewPosition = viewMatrix * modelPosition;\n      vec4 projectionPostion = projectionMatrix * viewPosition;\n      gl_Position = projectionPostion;\n      gl_PointSize = size * 25. * pixelRatio;\n      gl_PointSize *= (1.0 / - viewPosition.z);\n      vColor = color;\n      vOpacity = opacity;\n    }"," varying vec3 vColor;\n    varying float vOpacity;\n    void main() {\n      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n      float strength = 0.05 / distanceToCenter - 0.1;\n      gl_FragColor = vec4(vColor, strength * vOpacity);\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n    }"),isFloat32Array=def=>def&&def.constructor===Float32Array,isVector=v=>v instanceof three_module.Vector2||v instanceof three_module.Vector3||v instanceof three_module.Vector4,normalizeVector=v=>Array.isArray(v)?v:isVector(v)?v.toArray():[v,v,v];function usePropAsIsOrAsAttribute(count,prop,setDefault){return react.useMemo((()=>{if(void 0!==prop){if(isFloat32Array(prop))return prop;if(prop instanceof three_module.Color){const a=Array.from({length:3*count},(()=>{return[(v=prop).r,v.g,v.b];var v})).flat();return Float32Array.from(a)}if(isVector(prop)||Array.isArray(prop)){const a=Array.from({length:3*count},(()=>normalizeVector(prop))).flat();return Float32Array.from(a)}return Float32Array.from({length:count},(()=>prop))}return Float32Array.from({length:count},setDefault)}),[prop])}const Sparkles_Sparkles=react.forwardRef((({noise:noise=1,count:count=100,speed:speed=1,opacity:opacity=1,scale:scale=1,size:size,color:color,children:children,...props},forwardRef)=>{react.useMemo((()=>(0,index_673ef987_esm.e)({SparklesImplMaterial:SparklesImplMaterial})),[]);const ref=react.useRef(null),dpr=(0,index_673ef987_esm.z)((state=>state.viewport.dpr)),_scale=normalizeVector(scale),positions=react.useMemo((()=>Float32Array.from(Array.from({length:count},(()=>_scale.map(three_module.MathUtils.randFloatSpread))).flat())),[count,..._scale]),sizes=usePropAsIsOrAsAttribute(count,size,Math.random),opacities=usePropAsIsOrAsAttribute(count,opacity),speeds=usePropAsIsOrAsAttribute(count,speed),noises=usePropAsIsOrAsAttribute(3*count,noise),colors=usePropAsIsOrAsAttribute(void 0===color?3*count:count,isFloat32Array(color)?color:new three_module.Color(color),(()=>1));return(0,index_673ef987_esm.A)((state=>{ref.current&&ref.current.material&&(ref.current.material.time=state.clock.elapsedTime)})),react.useImperativeHandle(forwardRef,(()=>ref.current),[]),react.createElement("points",(0,esm_extends.Z)({key:`particle-${count}-${JSON.stringify(scale)}`},props,{ref:ref}),react.createElement("bufferGeometry",null,react.createElement("bufferAttribute",{attach:"attributes-position",args:[positions,3]}),react.createElement("bufferAttribute",{attach:"attributes-size",args:[sizes,1]}),react.createElement("bufferAttribute",{attach:"attributes-opacity",args:[opacities,1]}),react.createElement("bufferAttribute",{attach:"attributes-speed",args:[speeds,1]}),react.createElement("bufferAttribute",{attach:"attributes-color",args:[colors,3]}),react.createElement("bufferAttribute",{attach:"attributes-noise",args:[noises,3]})),children||react.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:dpr,depthWrite:!1}))}));var _FloatingSparkles$par,_FloatingSparkles$par2,_FloatingSparkles$par3,_SpawnEffectAndAnimat,_SpawnEffectAndAnimat2,_SpawnEffectAndAnimat3,components_Avatar=__webpack_require__("./src/components/Avatar/index.ts"),services=__webpack_require__("./src/services/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),Avatar=function Avatar(args){return(0,jsx_runtime.jsx)(components_Avatar.q,(0,objectSpread2.Z)({},args))},Sparkles=function Sparkles(args){return(0,jsx_runtime.jsx)(Sparkles_Sparkles,(0,objectSpread2.Z)({},args))},Examples_stories={component:Avatar,subcomponents:{Sparkles:Sparkles}},disableTable={table:{disable:!0}},ignoreArgTypesOnExamples=["modelSrc","animationSrc","poseSrc","halfBody","shadows","cameraTarget","cameraInitialDistance","style","idleRotation","emotion","background","capture","loader","dpr","className","headMovement","cameraZoomTarget","bloom","onLoadedEffect","onLoadedAnimation","children"].reduce((function(acc,key){return acc[key]=disableTable,acc}),{}),FloatingSparkles=function FloatingSparkles(args){return(0,jsx_runtime.jsx)(Avatar,{modelSrc:(0,services.gT)("female.glb"),cameraTarget:components_Avatar.b.TARGET.FULL_BODY.FEMALE,cameraInitialDistance:components_Avatar.b.CONTROLS.FULL_BODY.MAX_DISTANCE,children:(0,jsx_runtime.jsx)(Sparkles,(0,objectSpread2.Z)({},args))})};FloatingSparkles.args={count:70,scale:4,size:5,speed:.25,opacity:.6,color:"#124cca"},FloatingSparkles.argTypes=(0,objectSpread2.Z)({count:{control:{type:"range",min:0,max:70}},scale:{control:{type:"number"}},size:{control:{type:"range",min:0,max:10}},speed:{control:{type:"range",step:.01,min:0,max:20}},opacity:{control:{type:"range",step:.01,min:0,max:1.1}}},ignoreArgTypesOnExamples);var SpawnEffectAndAnimation=function Template(args){return(0,jsx_runtime.jsx)(Avatar,(0,objectSpread2.Z)({style:{background:"rgb(9,20,26)"}},args))}.bind({});SpawnEffectAndAnimation.args={onLoadedEffect:{src:(0,services.gT)("spawn-effect.glb"),loop:12},onLoadedAnimation:{src:(0,services.gT)("male-spawn-animation.fbx"),loop:1},cameraTarget:components_Avatar.b.TARGET.FULL_BODY.FEMALE,cameraInitialDistance:components_Avatar.b.CONTROLS.FULL_BODY.MAX_DISTANCE,modelSrc:(0,services.gT)("male-emissive.glb"),animationSrc:(0,services.gT)("male-idle.glb")},SpawnEffectAndAnimation.argTypes=(0,objectSpread2.Z)((0,objectSpread2.Z)({},ignoreArgTypesOnExamples),{},{onLoadedEffect:{control:{disable:!1}},onLoadedAnimation:{control:{disable:!1}},modelSrc:{control:{disable:!1}},animationSrc:{control:{disable:!1}}}),FloatingSparkles.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},FloatingSparkles.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_FloatingSparkles$par=FloatingSparkles.parameters)||void 0===_FloatingSparkles$par?void 0:_FloatingSparkles$par.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => <Avatar modelSrc={getStoryAssetPath('female.glb')} cameraTarget={CAMERA.TARGET.FULL_BODY.FEMALE} cameraInitialDistance={CAMERA.CONTROLS.FULL_BODY.MAX_DISTANCE}>\n    <Sparkles {...args} />\n  </Avatar>"},null===(_FloatingSparkles$par2=FloatingSparkles.parameters)||void 0===_FloatingSparkles$par2||null===(_FloatingSparkles$par3=_FloatingSparkles$par2.docs)||void 0===_FloatingSparkles$par3?void 0:_FloatingSparkles$par3.source)})}),SpawnEffectAndAnimation.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},SpawnEffectAndAnimation.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_SpawnEffectAndAnimat=SpawnEffectAndAnimation.parameters)||void 0===_SpawnEffectAndAnimat?void 0:_SpawnEffectAndAnimat.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => <Avatar style={{\n  background: 'rgb(9,20,26)'\n}} {...args} />"},null===(_SpawnEffectAndAnimat2=SpawnEffectAndAnimation.parameters)||void 0===_SpawnEffectAndAnimat2||null===(_SpawnEffectAndAnimat3=_SpawnEffectAndAnimat2.docs)||void 0===_SpawnEffectAndAnimat3?void 0:_SpawnEffectAndAnimat3.source)})});var __namedExportsOrder=["FloatingSparkles","SpawnEffectAndAnimation"];FloatingSparkles.__docgenInfo={description:"",methods:[],displayName:"FloatingSparkles"}}}]);